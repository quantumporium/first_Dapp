<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="stylesheet.css">
        <!-- check if web3 already defined -->
        <script type="text/javascript" src="web3.min.js"></script>
        <script>
            window.addEventListener('load', function () {
                if(typeof web3 !== 'undefined'){
                    console.log('web3 detected !' + web3.currentProvider.constructor.name)
                    window.web3 = new Web3(web3.currentProvider);
                } else {
                    // if not, connect to http provider
                    console.log('no web3 detected... using http provider');
                    const web3 = new Web3(new Web3.providers.HttpProvider("https://mainnet.infura.io/v3/24e7bac620214d7ca3f17532122edcf9"));
                    window.web3 = new Web3(new web3.providers.HttpProvider('https://mainnet.infura.io/v3/24e7bac620214d7ca3f17532122edcf9'))
                }
            })

            //getBalence() function
            function getBalance() {
                var address, wei, balence;

                address = document.getElementById('address').value;

                    try {
                        web3.eth.getBalance(address, function (error, wei ) {
                            if(!error) {
                                var balence = web3.utils.fromWei(wei, 'ether');
                                document.getElementById('output').innerHTML = balence + 'ETH';
                            };
                        })
                    } catch (err) {
                        document.getElementById("output").innerHTML = err;
                    }
                }
        </script>
    </head>

    <body>
        <header>
            <h1>Get account</h1>
        </header>
        
        <p>Enter you Ethereum Address </p>

        <input type="text" size ='50' id = 'address'/>
        <button type = 'button' onClick = 'getBalance();'>Balence</button>
        <br />
        <br />
        <div id='output'></div>
    </body>
</html>
